schema: '2.0'
stages:
  prepare:
    cmd: python src/prepare.py
    deps:
    - path: data/raw/Summary_of_Weather.csv
      hash: md5
      md5: db1994d51f83b7d169617e243a7f343e
      size: 11535950
    - path: data/raw/Weather_Station_Locations.csv
      hash: md5
      md5: 2eeb4c7daf2efeef57105631ed752274
      size: 8661
    - path: src/prepare.py
      hash: md5
      md5: f9f85703c46dd273d379672b5d2d18b4
      size: 8335
    outs:
    - path: data/processed/working_copy.csv
      hash: md5
      md5: af2699d181fc597db60f90f8171968df
      size: 4893714
    - path: metrics/prepare_metrics.json
      hash: md5
      md5: 9794473d9175d8a04da6a3cef85ca173
      size: 215
  analyze:
    cmd: python src/correlation.py
    deps:
    - path: data/processed/working_copy.csv
      hash: md5
      md5: af2699d181fc597db60f90f8171968df
      size: 4893714
    - path: src/correlation.py
      hash: md5
      md5: 27fa7244ef1f12213e798ea25db2c4d7
      size: 5443
    outs:
    - path: reports/correlation_heatmap.png
      hash: md5
      md5: 1e906b215ef39ff6066e1cbd7caf0ae8
      size: 95668
    - path: reports/correlation_metrics.json
      hash: md5
      md5: a248559c1a02562e24bd2c9eb5909909
      size: 1075
    - path: reports/correlation_with_MeanTemp.png
      hash: md5
      md5: f42a71cba2dcd63752824ef47206841a
      size: 55098
  split:
    cmd: python src/split.py
    deps:
    - path: data/processed/working_copy.csv
      hash: md5
      md5: af2699d181fc597db60f90f8171968df
      size: 4893714
    - path: src/split.py
      hash: md5
      md5: 7b25e1d36c067c2771141cb796baba93
      size: 3459
    params:
      params.yaml:
        split:
          train_ratio: 0.7
          val_ratio: 0.2
          test_ratio: 0.1
          target_column: MeanTemp
          group_by_month: false
          random_state: 42
    outs:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 2faeb1c432fb3e155e48e2e36e1a82ae
      size: 412643
    - path: data/processed/X_train.csv
      hash: md5
      md5: 6e567feb1bfc1504c12f96a74425f169
      size: 2878402
    - path: data/processed/X_val.csv
      hash: md5
      md5: 32ef7cee60ed2050ffe4f2928af0f772
      size: 835435
    - path: data/processed/y_test.csv
      hash: md5
      md5: c43efd032420fdfa151670a0d2435a56
      size: 93676
    - path: data/processed/y_train.csv
      hash: md5
      md5: d16ba63f94286f72713bdd96fa5e9e87
      size: 653064
    - path: data/processed/y_val.csv
      hash: md5
      md5: befd27d594ccdc835ebf2b691312f37c
      size: 187166
    - path: metrics/split_metrics.json
      hash: md5
      md5: 87a5f22ae972d8f6c6635daffbd7c580
      size: 312
  train_linear:
    cmd: python src/train_linear.py
    deps:
    - path: data/processed/X_test.csv
      hash: md5
      md5: 2faeb1c432fb3e155e48e2e36e1a82ae
      size: 412643
    - path: data/processed/X_train.csv
      hash: md5
      md5: 6e567feb1bfc1504c12f96a74425f169
      size: 2878402
    - path: data/processed/X_val.csv
      hash: md5
      md5: 32ef7cee60ed2050ffe4f2928af0f772
      size: 835435
    - path: data/processed/y_test.csv
      hash: md5
      md5: c43efd032420fdfa151670a0d2435a56
      size: 93676
    - path: data/processed/y_train.csv
      hash: md5
      md5: d16ba63f94286f72713bdd96fa5e9e87
      size: 653064
    - path: data/processed/y_val.csv
      hash: md5
      md5: befd27d594ccdc835ebf2b691312f37c
      size: 187166
    - path: src/train_linear.py
      hash: md5
      md5: 300d40d5d94ffc8054c07682f86bd2e9
      size: 8383
    params:
      params.yaml:
        linear_models:
          ridge:
            enabled: true
            alpha: 1.0
            fit_intercept: true
            positive: false
            max_iter: 1000
            tol: 0.0001
            solver: auto
          lasso:
            enabled: true
            alpha: 0.01
            fit_intercept: true
            positive: false
            max_iter: 1000
            tol: 0.0001
            selection: cyclic
          elastic:
            enabled: true
            alpha: 0.01
            l1_ratio: 0.5
            fit_intercept: true
            positive: false
            max_iter: 1000
            tol: 0.0001
            selection: cyclic
    outs:
    - path: metrics/elastic_metrics.json
      hash: md5
      md5: e190fab3c4aa25bf73e0a24d56d9b103
      size: 2137
    - path: metrics/lasso_metrics.json
      hash: md5
      md5: 66590dc5305698c3a7e395deca8965dc
      size: 2112
    - path: metrics/linear_summary.json
      hash: md5
      md5: 29d6dc868995988c238ad5bd30bb9c87
      size: 681
    - path: metrics/ridge_metrics.json
      hash: md5
      md5: 381fdc0e5655e0fa940ad83708b1665b
      size: 2109
    - path: models/linear/elastic.pkl
      hash: md5
      md5: 2f22e0745694e0d96da7547d0ddef2e3
      size: 1016
    - path: models/linear/lasso.pkl
      hash: md5
      md5: 943ce9ac063163e956635c69d26987e4
      size: 1016
    - path: models/linear/ridge.pkl
      hash: md5
      md5: 8112d1d9d07266292ac94e87486d9542
      size: 937
